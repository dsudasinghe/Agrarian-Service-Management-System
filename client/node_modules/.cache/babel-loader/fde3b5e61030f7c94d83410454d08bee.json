{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\EasyAgro-final\\\\EasyAgro-fyp-attempt-3\\\\client\\\\src\\\\components\\\\eventslist.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, React } from \"react\";\nimport Header from \"./admin/common/header\";\nimport Notiflix from \"notiflix\";\nimport Moment from \"moment\";\nimport Swal from \"sweetalert2\";\nimport { Col, Container, Button, Row } from \"react-bootstrap\";\nimport Footer from \"./admin/common/footer\";\nimport getUrl from \"../utils/routes\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst EventList = () => {\n  _s();\n\n  const [list, setList] = useState([]);\n\n  const getList = async () => {\n    Notiflix.Loading.standard(\"Loading Events\");\n    let resp = await axios.post(getUrl(\"listActiveEvent\"));\n    setList(resp.data);\n    Notiflix.Loading.remove();\n  };\n\n  useEffect(() => {\n    getList();\n  }, []);\n\n  const getUserData = () => {\n    return JSON.parse(localStorage.getItem(\"user\"));\n  };\n\n  const enrollUser = async eventrec => {\n    try {\n      Notiflix.Loading.standard();\n      const resp = await axios.post(getUrl(\"addEnroll\"), {\n        user: getUserData().id,\n        nic: getUserData().nic,\n        event: eventrec\n      });\n\n      if (resp.status === 200) {\n        Swal.fire(\"You have enrolled with this event\");\n      } else {\n        Swal.fire(\"Already registered with this event\");\n      }\n\n      Notiflix.Loading.remove();\n    } catch (error) {\n      Notiflix.Loading.remove();\n\n      if (error.status === 400) {\n        Swal.fire(\"Already registered with this event\");\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"shadow-sm text-success mt-5 p-4 rounded\",\n      style: {\n        marginBottom: \"90px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-start mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 12,\n          sm: 12,\n          children: /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \" text-success pb-4\",\n            children: \"Events\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), list.map((item, index) => /*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          sm: 12,\n          className: \"shadow-sm text-success p-4 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \" text-success pb-4\",\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-dark\",\n            children: item.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"text-danger\",\n            children: [\"Starts On :\", \" \", Moment(item.startdatetime).format(\"D/MM/Y hh:mm A\")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => enrollUser(item._id),\n            className: \"mt-4\",\n            variant: \"success\",\n            type: \"submit\",\n            children: \"Enroll to this event\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(EventList, \"ZBNfaudzy8bVxb8UgkyyMnLdlWY=\");\n\n_c = EventList;\nexport default EventList;\n\nvar _c;\n\n$RefreshReg$(_c, \"EventList\");","map":{"version":3,"names":["useState","useEffect","React","Header","Notiflix","Moment","Swal","Col","Container","Button","Row","Footer","getUrl","axios","EventList","list","setList","getList","Loading","standard","resp","post","data","remove","getUserData","JSON","parse","localStorage","getItem","enrollUser","eventrec","user","id","nic","event","status","fire","error","marginBottom","map","item","index","title","description","startdatetime","format","_id"],"sources":["C:/Users/User/Desktop/EasyAgro-final/EasyAgro-fyp-attempt-3/client/src/components/eventslist.jsx"],"sourcesContent":["import { useState, useEffect, React } from \"react\";\nimport Header from \"./admin/common/header\";\nimport Notiflix from \"notiflix\";\nimport Moment from \"moment\";\nimport Swal from \"sweetalert2\";\nimport { Col, Container, Button, Row } from \"react-bootstrap\";\nimport Footer from \"./admin/common/footer\";\n\nimport getUrl from \"../utils/routes\";\nimport axios from \"axios\";\n\nconst EventList = () => {\n  const [list, setList] = useState([]);\n\n  const getList = async () => {\n    Notiflix.Loading.standard(\"Loading Events\");\n    let resp = await axios.post(getUrl(\"listActiveEvent\"));\n    setList(resp.data);\n    Notiflix.Loading.remove();\n  };\n\n  useEffect(() => {\n    getList();\n  }, []);\n\n  const getUserData = () => {\n    return JSON.parse(localStorage.getItem(\"user\"));\n  };\n\n  const enrollUser = async (eventrec) => {\n    try {\n      Notiflix.Loading.standard();\n      const resp = await axios.post(getUrl(\"addEnroll\"), {\n        user: getUserData().id,\n        nic: getUserData().nic,\n        event: eventrec,\n      });\n      if (resp.status === 200) {\n        Swal.fire(\"You have enrolled with this event\");\n      } else {\n        Swal.fire(\"Already registered with this event\");\n      }\n      Notiflix.Loading.remove();\n    } catch (error) {\n      Notiflix.Loading.remove();\n      if (error.status === 400) {\n        Swal.fire(\"Already registered with this event\");\n      }\n    }\n  };\n\n  return (\n    <>\n      <Header />\n      <Container\n        className=\"shadow-sm text-success mt-5 p-4 rounded\"\n        style={{ marginBottom: \"90px\" }}\n      >\n        <Row className=\"justify-content-start mt-5\">\n          <Col md={12} sm={12}>\n            <h4 className=\" text-success pb-4\">Events</h4>\n          </Col>\n          {list.map((item, index) => (\n            <Col md={6} sm={12} className=\"shadow-sm text-success p-4 rounded\">\n              <h5 className=\" text-success pb-4\">{item.title}</h5>\n              <p className=\"text-dark\">{item.description}</p>\n              <h6 className=\"text-danger\">\n                Starts On :{\" \"}\n                {Moment(item.startdatetime).format(\"D/MM/Y hh:mm A\")}\n              </h6>\n              <Button\n                onClick={() => enrollUser(item._id)}\n                className=\"mt-4\"\n                variant=\"success\"\n                type=\"submit\"\n              >\n                Enroll to this event\n              </Button>\n            </Col>\n          ))}\n        </Row>\n      </Container>\n      <Footer></Footer>\n    </>\n  );\n};\n\nexport default EventList;\n"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,KAA9B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,uBAAnB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,SAASC,GAAT,EAAcC,SAAd,EAAyBC,MAAzB,EAAiCC,GAAjC,QAA4C,iBAA5C;AACA,OAAOC,MAAP,MAAmB,uBAAnB;AAEA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;;AAEA,MAAMC,SAAS,GAAG,MAAM;EAAA;;EACtB,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBhB,QAAQ,CAAC,EAAD,CAAhC;;EAEA,MAAMiB,OAAO,GAAG,YAAY;IAC1Bb,QAAQ,CAACc,OAAT,CAAiBC,QAAjB,CAA0B,gBAA1B;IACA,IAAIC,IAAI,GAAG,MAAMP,KAAK,CAACQ,IAAN,CAAWT,MAAM,CAAC,iBAAD,CAAjB,CAAjB;IACAI,OAAO,CAACI,IAAI,CAACE,IAAN,CAAP;IACAlB,QAAQ,CAACc,OAAT,CAAiBK,MAAjB;EACD,CALD;;EAOAtB,SAAS,CAAC,MAAM;IACdgB,OAAO;EACR,CAFQ,EAEN,EAFM,CAAT;;EAIA,MAAMO,WAAW,GAAG,MAAM;IACxB,OAAOC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAP;EACD,CAFD;;EAIA,MAAMC,UAAU,GAAG,MAAOC,QAAP,IAAoB;IACrC,IAAI;MACF1B,QAAQ,CAACc,OAAT,CAAiBC,QAAjB;MACA,MAAMC,IAAI,GAAG,MAAMP,KAAK,CAACQ,IAAN,CAAWT,MAAM,CAAC,WAAD,CAAjB,EAAgC;QACjDmB,IAAI,EAAEP,WAAW,GAAGQ,EAD6B;QAEjDC,GAAG,EAAET,WAAW,GAAGS,GAF8B;QAGjDC,KAAK,EAAEJ;MAH0C,CAAhC,CAAnB;;MAKA,IAAIV,IAAI,CAACe,MAAL,KAAgB,GAApB,EAAyB;QACvB7B,IAAI,CAAC8B,IAAL,CAAU,mCAAV;MACD,CAFD,MAEO;QACL9B,IAAI,CAAC8B,IAAL,CAAU,oCAAV;MACD;;MACDhC,QAAQ,CAACc,OAAT,CAAiBK,MAAjB;IACD,CAbD,CAaE,OAAOc,KAAP,EAAc;MACdjC,QAAQ,CAACc,OAAT,CAAiBK,MAAjB;;MACA,IAAIc,KAAK,CAACF,MAAN,KAAiB,GAArB,EAA0B;QACxB7B,IAAI,CAAC8B,IAAL,CAAU,oCAAV;MACD;IACF;EACF,CApBD;;EAsBA,oBACE;IAAA,wBACE,QAAC,MAAD;MAAA;MAAA;MAAA;IAAA,QADF,eAEE,QAAC,SAAD;MACE,SAAS,EAAC,yCADZ;MAEE,KAAK,EAAE;QAAEE,YAAY,EAAE;MAAhB,CAFT;MAAA,uBAIE,QAAC,GAAD;QAAK,SAAS,EAAC,4BAAf;QAAA,wBACE,QAAC,GAAD;UAAK,EAAE,EAAE,EAAT;UAAa,EAAE,EAAE,EAAjB;UAAA,uBACE;YAAI,SAAS,EAAC,oBAAd;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QADF,EAIGvB,IAAI,CAACwB,GAAL,CAAS,CAACC,IAAD,EAAOC,KAAP,kBACR,QAAC,GAAD;UAAK,EAAE,EAAE,CAAT;UAAY,EAAE,EAAE,EAAhB;UAAoB,SAAS,EAAC,oCAA9B;UAAA,wBACE;YAAI,SAAS,EAAC,oBAAd;YAAA,UAAoCD,IAAI,CAACE;UAAzC;YAAA;YAAA;YAAA;UAAA,QADF,eAEE;YAAG,SAAS,EAAC,WAAb;YAAA,UAA0BF,IAAI,CAACG;UAA/B;YAAA;YAAA;YAAA;UAAA,QAFF,eAGE;YAAI,SAAS,EAAC,aAAd;YAAA,0BACc,GADd,EAEGtC,MAAM,CAACmC,IAAI,CAACI,aAAN,CAAN,CAA2BC,MAA3B,CAAkC,gBAAlC,CAFH;UAAA;YAAA;YAAA;YAAA;UAAA,QAHF,eAOE,QAAC,MAAD;YACE,OAAO,EAAE,MAAMhB,UAAU,CAACW,IAAI,CAACM,GAAN,CAD3B;YAEE,SAAS,EAAC,MAFZ;YAGE,OAAO,EAAC,SAHV;YAIE,IAAI,EAAC,QAJP;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAPF;QAAA;UAAA;UAAA;UAAA;QAAA,QADD,CAJH;MAAA;QAAA;QAAA;QAAA;MAAA;IAJF;MAAA;MAAA;MAAA;IAAA,QAFF,eA8BE,QAAC,MAAD;MAAA;MAAA;MAAA;IAAA,QA9BF;EAAA,gBADF;AAkCD,CA1ED;;GAAMhC,S;;KAAAA,S;AA4EN,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}